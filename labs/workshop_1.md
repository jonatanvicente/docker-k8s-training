# ðŸ”§ Workshop 1


### ðŸ”§ Exercise 1: Docker Multi-Container App (Worker + NGINX)

**Objective:** 
Create a two-container Docker application using docker-compose where:

1. **Worker container (backend)**
	- Runs a Node.js script worker.js (provided). This script appends timestamped messages to a file (at /logs/shared.log) every few seconds
2. **Web container (server)**
	- Serves the file generated by the worker container so it can be viewed in a browser
	- As a starter code, use nginx.conf provided
3. **All images must be stored in a public registry**

The URL http://localhost:8080/logs/shared.log should display the file growing in real time

---

### ðŸ”§ Exercise 2 â€“ Kubernetes Multi-Container App (Worker + NGINX)

**Objective:**
Deploy a multi-container application in Kubernetes that extends Exercise 1, demonstrating orchestration, volume sharing, and basic probes.

**Requirements**

1. Namespace
	- All resources must be deployed in a dedicated namespace called **workshop**.
2. Worker container (backend)
	- Runs a Node.js script (worker.js) that writes timestamped lines to a file continuously.
	- Can be scaled horizontally via a Deployment.
3. Web container (NGINX server)
	- Serves the shared file generated by the worker 
	- Configuration must be injected via a ConfigMap or mounted file.
	- Include readiness and liveness probes to monitor availability.
4. Pod / Deployment
	- Worker and web containers can be either:
		- Two containers in a single pod (sidecar pattern)
		- Separate pods connected via shared PersistentVolumeClaim or emptyDir
	- Must use a Deployment with at least 2 replicas for the web container.
5. Volumes
	- Use Kubernetes volumes (emptyDir or PVC) to allow the worker to write logs and the web container to read them.
	- If using PVC, ensure persistence across pod restarts.
6. Service
		- Expose the web container via a Kubernetes Service of type NodePort or ClusterIP so it can be accessed externally.
		- The URL should display the log file in real time.
7. Labels / Selectors
		- Use proper labels for the Deployment and Service to connect pods and traffic correctly.
8. **All images must be stored in a public registry**

**Expected Behavior**

- Worker generates log entries continuously in the shared volume.
- Web container serves the file at /logs/shared.log, accessible via browser.
- Liveness and readiness probes ensure the web container is healthy and available.
- Deployment manages scaling and updates automatically.

**Optional Enhancements**

- Replace emptyDir with a PersistentVolumeClaim for persistent storage.
- Use ConfigMaps and environment variables to configure the worker interval.
- Add resource requests/limits for CPU and memory.
- Implement rolling updates to observe Deployment updates in action.
- Run multiple workers and discuss concurrency issues.
- Monitor logs and resource usage with `kubectl logs` and `kubectl top pods`.


